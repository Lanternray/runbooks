<!-- Turn this into a template for the other pages -->

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../css/styles.css">
    <title>S-Notify Failures</title>
</head>

<body>
    
    <div class="header">
        <h1>S-Notify Failures</h1>
        <p>Back to <a href="../">Home</a></p>
    </div>
    <hr>

    <h2>BACKGROUND</h2>
    <p>Acquired studies stored to archive are not being announced to Millennium (S-Notify).</p>

    <h2>ITEMS FOR INVESTIGATION</h2>
    <ul>
        <li>CAMM7: SystemOut.log from Websphere for /studyvalidation</li>
        <li>CAMM6: 353 logs</li>
    </ul>

    <h2>STEPS</h2>
    <p>Review the applicable logs to see what is happening when SNOTIFY is received.</p>
    <p>If there are no SNOTIFY transactions in the logs, the issue is likely upstream from our service being called. The archive-side will likely need to be reviewed to ensure S-Notify is being attempted.</p>
    <p>If the client is onboarded for Millennium logs in Splunk, can query for applicable logs.</p>
    <p>/studyvalidation WAS logs (CAMM7):</p>

    <div class="code-snippet">
        index=client_&lt;mnemonic&gt;_millennium_services source=*was*&lt;domain&gt;* /studyvalidation</div>

    <p>353 logs (CAMM6):</p>
    <div class="code-snippet">
        index=client_&lt;mnemonic&gt;_millennium_services source=*&lt;domain&gt;*cmb_0353*log</div>

    <p>Review the logs for cause of failure, for example:</p>
    <div class="code-snippet">[6/13/25 11:16:56:826 EDT] 0000970e CPSStudyReade E com.cerner.system.instrument.logging.MultiProviderErrorReporting$MultiProviderErrorReporter$$Lambda$47/0000000000000000 accept [Exception occurred while storing study [studyInstanceUID:2.16.840.1.113669.632.2.3091487559576166629.8059112188863285100].][applicationName=mmf-studyvalidation-app-service-ear-c2075.unon_in.cernerasp.com][remoteHost=unonineaodr03.cernerasp.com][requestURI=/studyvalidation/c2075.unon_in.cernerasp.com/service/studyNotification] com.cerner.biz.mmf.studyvalidation.exception.ProccessSNotifyException: <span id="code-highlight">Device 'cpssnde2lsapp.cernerworksshared.com' is not system recognized archive storage device</span> at com.cerner.biz.mmf.studyvalidation.snotify.SNotifyManagerImpl.findArchiveDevice(SNotifyManagerImpl.java:450) at com.cerner.biz.mmf.studyvalidation.snotify.StudyNotificationTransactedAction.run(StudyNotificationTransactedAction.java:274) at com.cerner.biz.mmf.studyvalidation.snotify.StudyNotificationTransactedAction.run(StudyNotificationTransactedAction.java:103)...</div>

    <p>The above means that an archive device does not exist in IM_DEVICE table with "IP_ADDRESS" (hostname) value of "cpssnde2lsapp.cernerworksshared.com".</p>

    <p>In IMDBTools, an imaging device must be defined with that exact host with an appropriate archive activity type.</p>

    <br>
    <br>

    <div class="footer">
    author: Shane Raweewonrungjumrus
    </div>

</body>
</html>